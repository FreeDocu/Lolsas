<Window x:Class="LivasModLoader.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="LivasModLoader" Height="900" Width="1400" Background="{StaticResource CosmicBackgroundBrush}">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Border Background="#33000000" Padding="20">
            <DockPanel>
                <StackPanel Orientation="Horizontal" DockPanel.Dock="Left">
                    <TextBlock Text="LivasModLoader" FontSize="26" FontWeight="Bold" Margin="0,0,16,0" />
                    <TextBlock Text="|" Foreground="{StaticResource CosmicMutedBrush}" Margin="0,0,16,0" />
                    <TextBlock Text="Космический загрузчик модов для Chivalry 2" Foreground="{StaticResource CosmicMutedBrush}" />
                </StackPanel>
                <StackPanel Orientation="Horizontal" DockPanel.Dock="Right" VerticalAlignment="Center">
                    <ToggleButton Content="Звёздный фон" IsChecked="{Binding IsStarfieldEnabled}" Foreground="{StaticResource CosmicTextBrush}" Background="#33000000" Padding="10,4" Margin="0,0,12,0" />
                    <Button Content="Проверка обновлений" Command="{Binding CheckForUpdatesCommand}" Style="{StaticResource SecondaryButtonStyle}" />
                </StackPanel>
            </DockPanel>
        </Border>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="260" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="320" />
            </Grid.ColumnDefinitions>

            <Border Grid.Column="0" Background="#221626" Padding="20">
                <StackPanel>
                    <TextBlock Text="Навигация" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,16" />
                    <ListBox ItemsSource="{Binding Tabs}" SelectedItem="{Binding SelectedTab}" BorderThickness="0" Background="Transparent">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Border Margin="0,0,0,10" Padding="12" Background="#22000000" CornerRadius="12">
                                    <TextBlock Text="{Binding Header}" />
                                </Border>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </StackPanel>
            </Border>

            <Grid Grid.Column="1">
                <Canvas IsHitTestVisible="False" Visibility="{Binding StarfieldVisibility}">
                    <ItemsControl ItemsSource="{Binding Stars}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <Canvas />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemContainerStyle>
                            <Style TargetType="ContentPresenter">
                                <Setter Property="Canvas.Left" Value="{Binding X}" />
                                <Setter Property="Canvas.Top" Value="{Binding Y}" />
                            </Style>
                        </ItemsControl.ItemContainerStyle>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Ellipse Width="{Binding Size}" Height="{Binding Size}" Fill="{Binding Brush}" Opacity="{Binding Opacity}" />
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </Canvas>

                <Border Margin="24" Style="{StaticResource CosmicCardStyle}" Background="#1C2544">
                    <ContentControl Content="{Binding SelectedTab.Content}" />
                </Border>
            </Grid>

            <Border Grid.Column="2" Background="#1B2036" Padding="20">
                <StackPanel>
                    <TextBlock Text="Уведомления" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,16" />
                    <ItemsControl ItemsSource="{Binding Notifications}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Background="#331F2937" CornerRadius="12" Padding="12" Margin="0,0,0,12">
                                    <StackPanel>
                                        <TextBlock Text="{Binding Title}" FontWeight="SemiBold" />
                                        <TextBlock Text="{Binding Message}" Foreground="{StaticResource CosmicMutedBrush}" TextWrapping="Wrap" />
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>
