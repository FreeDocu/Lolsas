<UserControl x:Class="LivasModLoader.Views.ModManagerView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="320" />
        </Grid.ColumnDefinitions>

        <StackPanel>
            <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                <Button Content="Обновить моды" Style="{StaticResource PrimaryButtonStyle}" Margin="0,0,12,0" Command="{Binding UpdateModsCommand}" />
                <Button Content="Обновить список" Style="{StaticResource SecondaryButtonStyle}" Command="{Binding RefreshCommand}" />
                <Button Content="Импорт .pak" Style="{StaticResource SecondaryButtonStyle}" Margin="12,0,0,0" Command="{Binding ImportModCommand}" />
            </StackPanel>

            <DataGrid ItemsSource="{Binding Mods}" SelectedItem="{Binding SelectedMod}" AutoGenerateColumns="False" Height="500"
                      Background="#1A2238" RowBackground="#141B2D" AlternatingRowBackground="#18223B"
                      Foreground="{StaticResource CosmicTextBrush}" BorderThickness="0">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Имя" Binding="{Binding Metadata.Name}" Width="*" />
                    <DataGridTextColumn Header="Тип" Binding="{Binding Metadata.Type}" Width="120" />
                    <DataGridTextColumn Header="Теги" Binding="{Binding Metadata.Tags}" Width="200" />
                    <DataGridCheckBoxColumn Header="Включён" Binding="{Binding IsEnabled}" Width="90" />
                </DataGrid.Columns>
            </DataGrid>

            <StackPanel Orientation="Horizontal" Margin="0,12,0,0">
                <Button Content="Включить/Отключить" Style="{StaticResource PrimaryButtonStyle}" Command="{Binding ToggleEnabledCommand}" CommandParameter="{Binding SelectedMod}" />
                <Button Content="Удалить из библиотеки" Style="{StaticResource SecondaryButtonStyle}" Margin="12,0,0,0" Command="{Binding DeleteFromLibraryCommand}" CommandParameter="{Binding SelectedMod}" />
            </StackPanel>
        </StackPanel>

        <Border Grid.Column="1" Style="{StaticResource CosmicCardStyle}" Background="#1B2036" Margin="12,0,0,0">
            <StackPanel>
                <TextBlock Text="Детали мода" FontSize="18" FontWeight="SemiBold" />
                <TextBlock Text="{Binding SelectedMod.Metadata.Name}" FontSize="16" Margin="0,12,0,0" />
                <TextBlock Text="Тип:" Foreground="{StaticResource CosmicMutedBrush}" Margin="0,12,0,0" />
                <TextBlock Text="{Binding SelectedMod.Metadata.Type}" />
                <TextBlock Text="Теги:" Foreground="{StaticResource CosmicMutedBrush}" Margin="0,12,0,0" />
                <TextBlock Text="{Binding SelectedMod.Metadata.Tags}" TextWrapping="Wrap" />
                <TextBlock Text="Источник обновлений:" Foreground="{StaticResource CosmicMutedBrush}" Margin="0,12,0,0" />
                <TextBlock Text="{Binding SelectedMod.Metadata.UpdateSourceUrl}" TextWrapping="Wrap" />
                <TextBlock Text="Последнее обновление:" Foreground="{StaticResource CosmicMutedBrush}" Margin="0,12,0,0" />
                <TextBlock Text="{Binding SelectedMod.Metadata.LastUpdated}" />
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
